{% extends "baseAdmin.html" %}
{% load format_words %}

{% block title %}
	<title>Lista de Professores</title>
{% endblock %}

{% block style %}
	<style> 
		.student-page {
			width: 100%;
			display: flex;
			flex-wrap: wrap;
			justify-content: space-around;
			align-items: flex-start;
			margin-top: 20px;
		}
		.left-section {
			width: 25%;
			max-width: 250px;
			display: flex;
			flex-direction: column;
			align-items: flex-start;
			justify-content: flex-start;
			background-color: white;
			padding: 10px;
			border: 1px solid #ccc;
		}
		.left-section a {
			display: flex;
			align-items: flex-end;
			justify-content: flex-start;
			width: 97%;
            font-size: 14px !important;
			text-decoration: none;
			background-color: #F6FBFB;

			color: black;
			padding-top: 10px;
			padding-bottom: 10px;
			padding-left: 10px;
			text-decoration: none;
			border-bottom: 1px solid #ccc;
		}
		.right-section {
			width: 68%;
			display: flex;
			flex-direction: column;
            margin-bottom: 10px;
		}



		.active-link-student {
			background-color: #46ACC2 !important;
			color: white !important;
			font-size: 13px !important;
		}
		.active-sublink-student {
			color: white !important;
			/*font-weight: bold;*/
			background-color: #46ACC2 !important;
		}

		@media only screen and (max-width: 768px) {
			.student-page {
				width: 90%;
				flex-direction: column;
				justify-content: center;
				align-items: center;
			}
			.filter-section {
				flex-direction: column;
			}
			.left-section {
				width: 100%;
			}
			.right-section {
				width: 100%;
			}
		}


        .login-div {
            width: 100%;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .teacher-register-title {
            padding: 0x;
            margin: 0px 0px 5px 0px;
        }
        .box-section {
            width: 100%;
            min-width: 410px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 1px solid #ccc;
            background-color: white;
            border-radius: 20px;
            padding: 10px;
        }
        .teacher-personal-details,
        .teacher-academic-details,
        .teacher-school-details {
            width: 100%;
            display: flex;
            flex-direction: column;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-around;
            padding-bottom: 10px;
        }
        .form-row .row-title {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-around;
            font-weight: bold;
            width: 100%;
            height: 35px;
            color: white;
            background-color: #46ACC2;
            text-align: center;
            border-radius: 16px;
           
        }
        .form-row .row {
            margin: 4px;
        }
        .teacher-personal-details-info,
        .teacher-academic-details-info,
        .teacher-school-details-info {
            width: 100%;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-around;
            padding-bottom: 10px;
        }
        .box-section .row {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .box-section .row label {
            font-size: 11px;
        }
        input[type="text"],
        input[type="email"] {
            outline: none;
            border: 1px solid #ccc;
            border-radius: 20px;
            height: 26px;
            padding-left: 6px;
            text-align: center;
        }
        input[type="password"] {
            outline: none;
            border: 1px solid white;
            border-radius: 20px;
            height: 26px;
            padding-left: 6px;
            text-align: center;
        }
        select,
        input[type="submit"],
        input[type="date"] {
            outline: none;
            border: 1px solid #ccc;
            border-radius: 20px;
            height: 30px;
            width: 167px;
            text-align: center;
        }
        input[type="submit"] {
            cursor: pointer;
            color: white;
            background-color: #46ACC2;
        }
        #id_password {
            border: none !important;
            width: 140px !important;
        }
        .toggle-symbol {
            height: 0px;
            width: 0px;
            rotate: 90deg;
            padding: 0px;
            margin-bottom: 7px;
        }
        .hide-show {
            display: none;
        }
        .add-remove-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 60px;
            height: 26px;
            cursor: pointer;
            outline: none;
            border: 1px solid #ccc;
            border-radius: 14px;
            text-align: center;
            font-weight: bold;
            background-color: #ccc;
            transition: all .2s;
        }
        .add-remove-btn:active {
            transform: scale(1.05);
        }
        .add-remove-subject {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .error {
            background-color: red;
            border-radius: 16px;
            padding: 4px;
            margin: 5px;
            font-size: 13px;
            font-style: italic;
        }
        .hightlight-input-field {
            border: 2px solid red;
        }
        .password-div {
			display: flex;
			align-items: center;
			justify-content: space-between;
			background: white;
            border: 1px solid #ccc;
			border-radius: 16px;
		}
		.fa {
			margin-right: 10px;
			cursor: pointer;
			font-size: 15px;
		}
		.chBox2 {
			display: none;
		}
        @media only screen and (max-width: 600px) {
            .teacher-personal-details-info,
            .teacher-academic-details-info,
            .teacher-school-details-info {
                flex-direction: column;
            }
        }
	</style>
{% endblock %}

{% block inner_style %}{% endblock %}

{% block content %}
	<div class="student-page">
		<div class="left-section">
			<a href="{% url 'app2:teacher_list_details' %}" class="professores-detalhes" title="Click para ver lista de professores">
				<span>Lista de professores</span>
			</a>
			<a href="{% url 'app2:teacher_attedances_page' %}" class="professores-presencas" title="Click para ver lista de presenças">
				<span>Presenças nas aulas</span>
			</a>
			<a href="{% url 'app2:register_teacher' %}" class="professores-registar" title="Click para registar professor">
				<span>Registar Professor</span>
			</a>
		</div>
		<div class="right-section">
			<div class="login-div">
                <h3 class="teacher-register-title" style="text-align:center;">Registar Professor</h3>
                <form method="post" class="box-section">
                    {% if message%}
                        <span class="error">{{ message }}</span>
                    {% endif %}
                    <div class="teacher-personal-details form-row">
                        <div class="row-title personal-details-btn">
                            <span>Dados Pessoais</span>
                            <!--
                            <div class="toggle-symbol">&#10095;</div>
                            -->
                        </div>
                        <div class="teacher-personal-details-info">
                            <div class="row">
                                <label for="id_username">Nome de usuario</label>
                                {{ form.username }}
                            </div>
                            <div class="row">
                                <label for="id_password">Senha</label>
                                <div class="password-div">
                                    {{ form.password }}
                                    <i class="fa chBox">&#xf06e;</i>
                                    <i class="fa fa-eye-slash chBox2" aria-hidden="true"></i>
                                </div>
                            </div>
                            <div class="row">
                                <label for="id_confirm_password">Repetir senha</label>
                                {{ form.confirm_password }}
                            </div>
                            <div class="row">
                                <label for="id_email">Email</label>
                                {{ form.email }}
                            </div>
                            <div class="row">
                                <label for="id_first_name">Primeiro nome</label>
                                {{ form.first_name }}
                            </div>
                            <div class="row">
                                <label for="id_last_name">Outros nomes</label>
                                {{ form.last_name }}
                            </div>
                            <div class="row">
                                <label for="id_ic_number">Numero de BI</label>
                                {{ form.ic_number }}
                            </div>
                            <div class="row">
                                <label for="id_gender">Genero</label>
                                {{ form.gender }}
                            </div>
                            <div class="row">
                                <label for="id_birth_date">Data de nascimento</label>
                                {{ form.birth_date }}
                            </div>
                            <div class="row">
                                <label for="id_phone_number">Numero de telefone</label>
                                {{ form.phone_number }}
                            </div>
                            <div class="row">
                                <label for="id_province">Provincia de residencia</label>
                                {{ form.province }}
                            </div>
                            <div class="row">
                                <label for="id_city">Cidade de residencia</label>
                                {{ form.city }}
                            </div>
                            <div class="row">
                                <label for="id_bairro">Bairro de residencia</label>
                                {{ form.bairro }}
                            </div>
                        </div>
                        
                    </div>
                    <div class="teacher-academic-details form-row">
                        <div class="row-title academic-details-btn">
                            <span>Dados Escolares</span>
                            <!--
                            <div class="toggle-symbol">&#10095;</div>
                            -->
                        </div>
                        <div class="teacher-academic-details-info">
                            <div class="row">
                                <label for="id_year">Ano</label>
                                {{ form.year }}
                            </div>
                            <div class="row">
                                <label for="id_semester">Semestre</label>
                                {{ form.semester }}
                            </div>
                            <div class="row">
                                <label for="id_classe">Classe</label>
                                {{ form.classe }}
                            </div>
                            <div class="row">
                                <label for="id_turma">Turma</label>
                                {{ form.turma }}
                            </div>
                        </div> 
                    </div>
                    <div class="teacher-academic-details form-row">
                        <div class="row-title academic-details-btn">
                            <span>Dados Academicos</span>
                            <!--
                            <div class="toggle-symbol">&#10095;</div>
                            -->
                        </div>
                        <div class="teacher-academic-details-info">
                            <div class="row">
                                <label for="id_university">Escola/Universidade</label>
                                {{ form.university }}
                            </div>
                            <div class="row">
                                <label for="id_degree">Nivel adacemico</label>
                                {{ form.degree }}
                            </div>
                            <div class="row">
                                <label for="id_curso">Curso</label>
                                {{ form.curso }}
                            </div>
                            <div class="row">
                                <label for="id_country_of_study">Pais</label>
                                {{ form.country_of_study }}
                            </div>
                            <div class="row">
                                <label for="id_city_of_study">Cidade</label>
                                {{ form.city_of_study }}
                            </div>
                            <div class="row">
                                <label for="id_study_start_date">Inicio do curso</label>
                                {{ form.study_start_date }}
                            </div>
                            <div class="row">
                                <label for="id_study_end_date">Termino do curso</label>
                                {{ form.study_end_date }}
                            </div>
                        </div> 
                    </div>
                    <div class="form-row">
                        {% csrf_token %}
                        <input type="submit" class="teacher-register-btn" value="Registar">
                    </div>
                </form>
            </div>
		</div>
	</div>
{% endblock %}

{% block javascript %}
	<script>		
		let marks = document.querySelectorAll('.mark');
        for (let mark of marks) {
			mark.style.fontWeight = 'bold';
			if (parseFloat(mark.textContent) < 9) {
				mark.style.color = 'red';
			} else {
				mark.style.color = 'teal';
			}
        }

        let idUsername = document.querySelector('#id_username');
		id_username.focus();
		let idPassword = document.querySelector('#id_password');
        let idPasswordConfirm = document.querySelector('#id_confirm_password');
		let chBox = document.querySelector('.chBox');
		let chBox2 = document.querySelector('.chBox2');

		showHidePassword(chBox, chBox2);
		showHidePassword(chBox2, chBox);

		function showHidePassword(tag1, tag2) {
			tag1.addEventListener('click', e => {
				tag1.style.display = 'none';
				tag2.style.display = 'block';
				togglePasswordVisibility();
			});
		}

		function togglePasswordVisibility() {
			togglePasswordTag(idPassword);
            togglePasswordTag(idPasswordConfirm);
		}

        function togglePasswordTag(tag) {
            if (tag.type === 'password') {
				tag.type = 'text';
			} else {
				tag.type = 'password';
			}
        }


		let allTrs = document.querySelectorAll('.tr-tbody');
		for (let tr of allTrs) {
			tr.addEventListener('click', e => {
				if (tr.classList.contains('highlight-tr')) {
					tr.classList.remove('highlight-tr');
				} else {
					tr.classList.add('highlight-tr');
				}
			});
		}

		let urls1 = ['professores-detalhes', 'professores-presencas',
					 'professores-registar'];
		
        localhost = 'http://localhost:8000/';
		checkActiveLink();
		function checkActiveLink() {	
			for (let url of urls1) {
				// console.log(localhost + url, localhost + url + '/' === window.location.href)
				// console.log(document.querySelector(`.${url}`));
				// console.log(localhost + url + '/', window.location.href, localhost + url + '/' === window.location.href)

				if (localhost + url + '/' === window.location.href) {
					let currentURL = document.querySelector(`.${url}`);
					currentURL.classList.add('active-link-student');
					let header = document.querySelector('.professores');
					header.classList.add('active-link');
				} else {
					let currentURL = document.querySelector(`.${url}`);
					currentURL.classList.remove('active-link-student');
				}
			}
		}

        let idProvince = document.getElementById('id_province')
        idProvince.value = 'Maputo';
        let countryOfStudy = document.getElementById('id_country_of_study');
        countryOfStudy.value = 'Moçambique';

        // toggleRow('personal-details-btn', 'teacher-personal-details-info');
        // toggleRow('academic-details-btn', 'teacher-academic-details-info');
        // toggleRow('school-details-btn', 'teacher-school-details-info');

        function toggleRow(classBtn, rowInfoDiv) {
            let btn = $(`.${ classBtn }`);
            let rowTag = $(`.${ rowInfoDiv }`);
            btn.click(function() {
                rowTag.toggleClass('hide-show');
                // teacherPersonalDetailsInfo.fadeToggle();
            });
        }

        let teacher_exists = "{{ teacher_exists }}";
        teacher_exists = true ? teacher_exists == 'True' : false;
        let same_password = "{{ same_password }}";
        same_password = true ? same_password == 'True' : false;
        let start_date_is_after_end_date = "{{ start_date_is_after_end_date }}";
        start_date_is_after_end_date = true ? start_date_is_after_end_date == 'True' : false;
        
        let study_start_date = document.getElementById('id_study_start_date');
        if (start_date_is_after_end_date) {
            study_start_date.focus();
            study_start_date.style.border = '2px solid red';
        } else {
            study_start_date.style.border = '1px solid #ccc';
        }

        let email = document.getElementById('id_email');
        if (teacher_exists) {
            $(window).scrollTop(0);
            email.focus();
            // email.classList.add('hightlight-input-field');
            email.style.border = '2px solid red';
        } else {
            // email.classList.remove('hightlight-input-field');
            email.style.border = '1px solid #ccc';
        }

        
        let password = document.getElementById('id_password');
        let confirm_password = document.getElementById('id_confirm_password');
        if (same_password) {
            $(window).scrollTop(0);
            password.focus();
            password.style.border = '2px solid red';
            confirm_password.style.border = '2px solid red';
        } else {
            password.style.border = '1px solid #ccc';
            confirm_password.style.border = '1px solid #ccc';
        }
	</script>
{% endblock %}

